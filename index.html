<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>无主之地</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="静存高远">
<meta property="og:type" content="website">
<meta property="og:title" content="无主之地">
<meta property="og:url" content="http://shenyizhou.github.io/index.html">
<meta property="og:site_name" content="无主之地">
<meta property="og:description" content="静存高远">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Yizhou Shen">
<meta property="article:tag" content="前端">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="无主之地" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">无主之地</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://shenyizhou.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2023-01-02-前端通用依赖库缓存方案" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2023/01/02/2023-01-02-%E5%89%8D%E7%AB%AF%E9%80%9A%E7%94%A8%E4%BE%9D%E8%B5%96%E5%BA%93%E7%BC%93%E5%AD%98%E6%96%B9%E6%A1%88/" class="article-date">
  <time datetime="2023-01-02T06:44:30.000Z" itemprop="datePublished">2023年01月02日</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E7%BB%BC%E5%90%88/">前端综合</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/01/02/2023-01-02-%E5%89%8D%E7%AB%AF%E9%80%9A%E7%94%A8%E4%BE%9D%E8%B5%96%E5%BA%93%E7%BC%93%E5%AD%98%E6%96%B9%E6%A1%88/">前端通用依赖库缓存方案</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>看到这篇文章 <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/0q0E3fIxdii5e-AgjXskdA">https://mp.weixin.qq.com/s/0q0E3fIxdii5e-AgjXskdA</a> 发现活动这边基本上也是重复代码率很高，例如 React, React-DOM, encrypt-fetch 这几个包能占到每次活动 js 的 80%文件体积。</p>
<p>将这份代码放到通用库中，从缓存或者离线包中获取，这样每次上线就可以打包非常小体积的代码上线。</p>
<h1 id="静态部署相关"><a href="#静态部署相关" class="headerlink" title="静态部署相关"></a>静态部署相关</h1><h2 id="部署-id-项目-id-环境-id"><a href="#部署-id-项目-id-环境-id" class="headerlink" title="部署 id = 项目 id + 环境 id"></a>部署 id = 项目 id + 环境 id</h2><p>形如 xxxx/appcore-react16.js 的 CDN 地址，其中 5fc64a46358dbb5df667b1d0 是项目 id 大家都知道，但是后面的 5fcee95c3d3224c86b199944 其实是环境地址，同一个环境也是不会变的。</p>
<p>一开始我以为这个是版本 id，每次发包都会改变，但实际上不会。而且这个普通的包和离线包都是如此，离线包后缀会带 _0，这也是预留字段，目前也是不会变的。</p>
<p>期间还踩了个坑：webpack 5 + webpack cli 4.2.0 在跑 webpack –env.id xxx 的时候就会报错 Unknown argument: –env，仿佛不支持 –env.id 这种写法，于是降级到 webpack 4 + webpack cli 3 跑通（还把 wepback 5 下的 target: [‘web’, ‘es5’] 写法改回了 target: ‘web’ 终于发布成功）。</p>
<h2 id="离线包的-url"><a href="#离线包的-url" class="headerlink" title="离线包的 url"></a>离线包的 url</h2><p>顺带说下，走离线包的 url 测试环境是 mpcdn.xxx、线上环境是 s7/s8.xxx，且目录一定要是 public 下。</p>
<h2 id="客户端存储"><a href="#客户端存储" class="headerlink" title="客户端存储"></a>客户端存储</h2><p>另外客户端离线包用来保存区分的是时候也不是只按照项目 id 存的，而是按照项目 id+环境 id 的完整形式存的。所以同一环境的离线包就算更新了，对应的 cdn 地址也不会变。</p>
<h1 id="离线包相关"><a href="#离线包相关" class="headerlink" title="离线包相关"></a>离线包相关</h1><h2 id="CDN-与强缓存"><a href="#CDN-与强缓存" class="headerlink" title="CDN 与强缓存"></a>CDN 与强缓存</h2><p>强缓存的优先级要高于离线包，CDN 文件都是走的强缓存，也就是说离线包只能优化第一次访问的速度，从第二次开始都是走的强缓存。</p>
<h2 id="客户端支持"><a href="#客户端支持" class="headerlink" title="客户端支持"></a>客户端支持</h2><p>目前感觉走缓存的体验效果良好，同时把通用库做成离线包，增加了第一次体验质量。</p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="1-通过-webpack-插件引入脚本："><a href="#1-通过-webpack-插件引入脚本：" class="headerlink" title="1.通过 webpack 插件引入脚本："></a>1.通过 webpack 插件引入脚本：</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackTagsPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-tags-plugin&#x27;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackTagsPlugin(&#123;</span><br><span class="line">            usePublicPath: <span class="literal">false</span>,</span><br><span class="line">            append: <span class="literal">false</span>,</span><br><span class="line">            scripts: [</span><br><span class="line">                &#123;</span><br><span class="line">                    path:</span><br><span class="line">                        <span class="string">&#x27;xxxx/appcore-react16.js?v=0&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注 1：千万不要用 async，加载时会报错，可以用 defer</p>
</blockquote>
<blockquote>
<p>注 2：直接用 script 标签用离线包可能在替换时出现问题，建议用 webpack 插件的方式引入</p>
</blockquote>
<h2 id="2-在-webpack-中配置："><a href="#2-在-webpack-中配置：" class="headerlink" title="2.在 webpack 中配置："></a>2.在 webpack 中配置：</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    externals: &#123;</span><br><span class="line">        <span class="string">&#x27;react&#x27;</span>: <span class="string">&#x27;React&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;react-dom&#x27;</span>: <span class="string">&#x27;ReactDOM&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;prop-types&#x27;</span>: <span class="string">&#x27;PropTypes&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>之后就能正常使用啦，import ‘react’ 的时候就相当于从 window.React 中获取。</p>
<h1 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h1><p>目前根据 React 版本分为两个 cdn 地址：</p>
<p>React 16：xxxx/appcore-react16.js?v=0</p>
<p>React 17：xxxx/appcore-react17.js?v=0</p>
<blockquote>
<p>这边带v=0是为了方便之后强制更新版本, 因为重新部署不会使得离线包升级</p>
</blockquote>
<h1 id="打包内容"><a href="#打包内容" class="headerlink" title="打包内容"></a>打包内容</h1><p>React 16 之后依赖集合类型 Map、Set 和 requestAnimationFrame，为了支持老设备使用了全局的 polyfill。</p>
<h1 id="polyfill"><a href="#polyfill" class="headerlink" title="polyfill"></a>polyfill</h1><p>React 在低版本手机可能有兼容性问题，要主动打 polyfill。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;core-js/es/map&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;core-js/es/set&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;raf/polyfill&#x27;</span>;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://shenyizhou.github.io/2023/01/02/2023-01-02-%E5%89%8D%E7%AB%AF%E9%80%9A%E7%94%A8%E4%BE%9D%E8%B5%96%E5%BA%93%E7%BC%93%E5%AD%98%E6%96%B9%E6%A1%88/" data-id="cltehmzgc008mrbabg7q18rir" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%93%E5%AD%98/" rel="tag">缓存</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022-12-19-Antd Charts 等数据可视化相关技术" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/12/19/2022-12-19-Antd%20Charts%20%E7%AD%89%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF/" class="article-date">
  <time datetime="2022-12-19T10:43:16.000Z" itemprop="datePublished">2022年12月19日</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E7%BB%BC%E5%90%88/">前端综合</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/12/19/2022-12-19-Antd%20Charts%20%E7%AD%89%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF/">Antd Charts 等数据可视化相关技术</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>大概涉及到的几个技术栈中，<code>Ant Design Charts</code> 是对 <code>G2Plot</code> 做了 React 化，<code>G2Plot</code> 是对 <code>G2</code> 做了API上的优化，<code>G2</code> 是对 <code>G</code> 做了图表的封装，而最底层的 <code>G</code> 是一套同时支持 Canvas 和 SVG 的 2D 渲染引擎。后三者都是 <code>AntV</code> 团队的作品，已开源，文档地址统一贴在文末。</p>
<h3 id="G"><a href="#G" class="headerlink" title="G"></a>G</h3><p><code>G</code> 的实现原理就是在画布 <code>Canvas</code> 上增加图形 <code>Shape</code>，仿佛作画一般。</p>
<p>如下的代码画一块 600 * 500 的画布：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里的 Canvas 只是画布的意思，如果是 svg，则是 import &#123; Canvas &#125; from &#x27;@antv/g-svg&#x27;;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Canvas &#125; <span class="keyword">from</span> <span class="string">&#x27;@antv/g-canvas&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 会有个只读属性 renderer = &#x27;canvas&#x27; | &#x27;svg&#x27;</span></span><br><span class="line"><span class="keyword">const</span> canvas = <span class="keyword">new</span> Canvas(&#123;</span><br><span class="line">    container: <span class="string">&#x27;container&#x27;</span>, <span class="comment">// 容器 id，也可以直接传入 DOM 元素</span></span><br><span class="line">    width: <span class="number">600</span>,</span><br><span class="line">    height: <span class="number">500</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>如下的代码在这块画布上画一个圆：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">canvas.addShape(<span class="string">&#x27;circle&#x27;</span>, &#123;</span><br><span class="line">    attrs: &#123;</span><br><span class="line">        x: <span class="number">300</span>, <span class="comment">// x 坐标(圆形是相对于圆心，矩形是相对于左上角)</span></span><br><span class="line">        y: <span class="number">200</span>, <span class="comment">// y 坐标(同上)</span></span><br><span class="line">        r: <span class="number">100</span>, <span class="comment">// 半径</span></span><br><span class="line">        fill: <span class="string">&#x27;#1890FF&#x27;</span>, <span class="comment">// 填充色</span></span><br><span class="line">        stroke: <span class="string">&#x27;#F04864&#x27;</span>, <span class="comment">// 边框色</span></span><br><span class="line">        lineWidth: <span class="number">4</span>, <span class="comment">// 边框宽度</span></span><br><span class="line">        radius: <span class="number">8</span> <span class="comment">// 圆角半径，主要对矩形配置使用，这里其实没用上</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>结果如图所示：</p>
<p><img src="https://gw.alipayobjects.com/mdn/rms_6ae20b/afts/img/A*Hz29QLOXPRYAAAAAAAAAAABkARQnAQ" alt="结果图"></p>
<p>类型除了圆形<code>circle</code>，还支持椭圆<code>ellipse</code>、矩形<code>rect</code>(包括圆角)、直线<code>line</code>、折线<code>polyline</code>、多边形<code>polygon</code>、路径<code>path</code>，以及几何图形、图片、文本、DOM 节点等。</p>
<p>除了单独画图形 <code>Shape</code>，还支持增加分组 <code>Group</code>，如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> group = canvas.addGroup();</span><br><span class="line"><span class="keyword">const</span> circle = group.addShape(<span class="string">&#x27;circle&#x27;</span> <span class="comment">/* 同上省略参数 */</span>);</span><br></pre></td></tr></table></figure>

<p>这样的好处是可以实现事件冒泡和委托，如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 事件冒泡</span></span><br><span class="line">group.on(<span class="string">&#x27;mouseenter&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    circle.attr(<span class="string">&#x27;fill&#x27;</span>, <span class="string">&#x27;#2FC25B&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 事件委托</span></span><br><span class="line">group.on(<span class="string">&#x27;circle:mouseenter&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    circle.attr(<span class="string">&#x27;fill&#x27;</span>, <span class="string">&#x27;#2FC25B&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="源码"><a href="#源码" class="headerlink" title="源码"></a><a target="_blank" rel="noopener" href="https://github.com/antvis/g">源码</a></h4><p><code>G</code> 是一个用 <code>lerna</code> 搭建的仓库，底下包括 <code>g-base</code>、<code>g-canva</code>、<code>g-svg</code>、<code>g-math</code>、<code>g-mobile</code>、<code>g-webgl</code> 几个仓库。</p>
<p><code>g-base</code> 包含了抽象画布 <code>AbstractCanvas</code> 之类的基类定义，以及在 <code>g-base/lib/types</code> 保存了相关 ts 定义。</p>
<p><code>g-canva</code>、<code>g-svg</code> 则是两套分别基于 canvas 和 svg 的具体实现，两者在 <code>draw</code> 方法的实现上有差异。</p>
<p><code>g-math</code> 提供几何图形的运算。</p>
<p><code>g-mobile</code>、<code>g-webgl</code> 暂时还无内容。</p>
<h3 id="G2"><a href="#G2" class="headerlink" title="G2"></a>G2</h3><p><code>G2</code> 是相对比较完善的图表库了，也是 AntV 团队 Star 数最高(10.3k)的作品了。</p>
<p>他是通过容器和数据源，配合图形语法，绘制出图表的。如下是创建 <code>Chart</code> 对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Chart &#125; <span class="keyword">from</span> <span class="string">&#x27;@antv/g2&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> chart = <span class="keyword">new</span> Chart(&#123;</span><br><span class="line">    container: <span class="string">&#x27;c1&#x27;</span>, <span class="comment">// 指定图表容器 ID</span></span><br><span class="line">    width: <span class="number">600</span>, <span class="comment">// 指定图表宽度</span></span><br><span class="line">    height: <span class="number">300</span> <span class="comment">// 指定图表高度</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>可以见到和 <code>G</code> 创建画布如出一辙。如下是载入数据源：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = [</span><br><span class="line">  &#123; <span class="attr">genre</span>: <span class="string">&#x27;Sports&#x27;</span>, <span class="attr">sold</span>: <span class="number">275</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">genre</span>: <span class="string">&#x27;Strategy&#x27;</span>, <span class="attr">sold</span>: <span class="number">115</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">genre</span>: <span class="string">&#x27;Action&#x27;</span>, <span class="attr">sold</span>: <span class="number">120</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">genre</span>: <span class="string">&#x27;Shooter&#x27;</span>, <span class="attr">sold</span>: <span class="number">350</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">genre</span>: <span class="string">&#x27;Other&#x27;</span>, <span class="attr">sold</span>: <span class="number">150</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">chart.data(data);</span><br></pre></td></tr></table></figure>

<p>接下来便是用 <code>G2</code> 的图形语法绘制图表。如下是绘制柱状图的一个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chart.interval().position(<span class="string">&#x27;genre*sold&#x27;</span>);</span><br><span class="line">chart.render(); <span class="comment">// 渲染</span></span><br></pre></td></tr></table></figure>

<p>结果如图所示：</p>
<p><img src="https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*8qbLQb7A0loAAAAAAAAAAABkARQnAQ" alt="结果图"></p>
<h4 id="源码-1"><a href="#源码-1" class="headerlink" title="源码"></a>源码</h4><p><code>G2</code> 的容器就是 <code>G</code> 的画布，会根据 <code>renderer</code> 调用 <code>getEngine</code> 获取不同的引擎（canvas/svg）。</p>
<h3 id="G2Plot"><a href="#G2Plot" class="headerlink" title="G2Plot"></a>G2Plot</h3><p><code>G2Plot</code> 就是在 <code>G2</code> 封装的基础上做了写法的优化。</p>
<h3 id="Ant-Design-Charts"><a href="#Ant-Design-Charts" class="headerlink" title="Ant Design Charts"></a>Ant Design Charts</h3><p><code>Ant Design Charts</code> 对我而言就是就是封装了一层自定义组件，让我可以不必再手动写 <code>useEffect</code> 等逻辑去手动更新 <code>G2Plot</code> 的 <code>config</code> 或 <code>data</code>。额外地，他还支持以下几个新功能：</p>
<ul>
<li>  Tooltip 支持 ReactNode</li>
<li>  额外的 <code>downloadImage()</code>、<code>toDataURL()</code> 等 API</li>
<li>  自定义 memoData 功能，按需控制图表 rerender</li>
</ul>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul>
<li>  <a target="_blank" rel="noopener" href="https://charts.ant.design/guide">Ant Design Charts 文档</a></li>
<li>  <a target="_blank" rel="noopener" href="https://g2plot.antv.vision/zh/docs/manual/introduction">G2Plot 文档</a></li>
<li>  <a target="_blank" rel="noopener" href="https://antv-g2.gitee.io/zh/docs/manual/about-g2">G2 文档</a></li>
<li>  <a target="_blank" rel="noopener" href="https://g.antv.vision/zh/docs/guide/introduce">G 文档</a></li>
</ul>
<blockquote>
<p>未完待续</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://shenyizhou.github.io/2022/12/19/2022-12-19-Antd%20Charts%20%E7%AD%89%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF/" data-id="cltehmzgb008irbabcxrye9rz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9B%BE%E8%A1%A8/" rel="tag">图表</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022-04-17-自动批量请求（5）—— useRequest 的实现" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/17/2022-04-17-%E8%87%AA%E5%8A%A8%E6%89%B9%E9%87%8F%E8%AF%B7%E6%B1%82%EF%BC%885%EF%BC%89%E2%80%94%E2%80%94%20useRequest%20%E7%9A%84%E5%AE%9E%E7%8E%B0/" class="article-date">
  <time datetime="2022-04-17T04:41:51.000Z" itemprop="datePublished">2022年04月17日</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E7%BB%BC%E5%90%88/">前端综合</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/17/2022-04-17-%E8%87%AA%E5%8A%A8%E6%89%B9%E9%87%8F%E8%AF%B7%E6%B1%82%EF%BC%885%EF%BC%89%E2%80%94%E2%80%94%20useRequest%20%E7%9A%84%E5%AE%9E%E7%8E%B0/">自动批量请求（5）—— useRequest 的实现</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>经过以上几篇文章，已经可以很好地处理 batch 请求的场景了。</p>
<p>但是每次还是得手动处理 loading 和 error，不够方便。</p>
<p>况且现在已经是 hooks 的时代了，本文便引入了 useRequest 的概念。</p>
<h2 id="useRequest-的使用"><a href="#useRequest-的使用" class="headerlink" title="useRequest 的使用"></a>useRequest 的使用</h2><p>我们对 useFetch 的使用习惯肯定是要符合我们对 hooks 的直觉，如此这般：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; data, loading, error &#125; = useRequest(</span><br><span class="line">    &#123; <span class="attr">url</span>: <span class="string">&#x27;url&#x27;</span>, <span class="attr">data</span>: &#123;&#125;, ...options &#125;,</span><br><span class="line">    [...deps]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>然后直接使用 data 渲染数据和控制空态，用 loading 展示加载态，用 error 展示错误态和错误信息。</p>
<p>由此见得，<code>useRequest</code> 的使用场景，主要是查询类的被动请求，像是点击操作这类的主动请求不太适合。</p>
<h2 id="useRequest-的实现"><a href="#useRequest-的实现" class="headerlink" title="useRequest 的实现"></a>useRequest 的实现</h2><p><code>useRequest</code> 的实现原理也很简单，相当于是自定义 hooks，如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 被动触发的 fetch hooks</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>param0 请求地址 url，请求参数 data，以及其他配置参数，如请求频次 frequence</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>deps 依赖数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useRequest = (</span><br><span class="line">    &#123; url, data &#125;: IUseRequestProps,</span><br><span class="line">    deps: <span class="built_in">any</span>[] = []</span><br><span class="line">) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> stringifyData = <span class="built_in">JSON</span>.stringify(data); <span class="comment">// 序列化，因为是依赖，防止 immutable 对象无限刷新</span></span><br><span class="line">    <span class="keyword">const</span> [state, setState] = useState&lt;IObject | <span class="literal">null</span>&gt;(<span class="literal">null</span>); <span class="comment">// 数据</span></span><br><span class="line">    <span class="keyword">const</span> [loading, setLoading] = useState(<span class="literal">true</span>); <span class="comment">// 是否加载中</span></span><br><span class="line">    <span class="keyword">const</span> [error, setError] = useState(<span class="string">&#x27;&#x27;</span>); <span class="comment">// 错误文本</span></span><br><span class="line"></span><br><span class="line">    useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        setLoading(<span class="literal">true</span>);</span><br><span class="line">        fetchBatch(</span><br><span class="line">            url,</span><br><span class="line">            &#123;</span><br><span class="line">                data: <span class="built_in">JSON</span>.parse(stringifyData)</span><br><span class="line">            &#125;,</span><br><span class="line">            (res: IObject) =&gt; &#123;</span><br><span class="line">                withBatch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    setState(res);</span><br><span class="line">                    setLoading(<span class="literal">false</span>);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            (err: <span class="built_in">Error</span>) =&gt; &#123;</span><br><span class="line">                withBatch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    setError(err.message);</span><br><span class="line">                    setLoading(<span class="literal">false</span>);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;, [url, stringifyData, ...deps]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        data: state,</span><br><span class="line">        loading,</span><br><span class="line">        error</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="额外功能"><a href="#额外功能" class="headerlink" title="额外功能"></a>额外功能</h2><p>上文只是实现了最基础的功能，在实际使用中经常会不满足需求，于是又产生了下文的几个功能点。</p>
<h3 id="主动修改数据"><a href="#主动修改数据" class="headerlink" title="主动修改数据"></a>主动修改数据</h3><p>因为数据是存在黑盒里的，用户无法进行受控的修改，所以其实可以把 <code>setState</code> 给暴露出去。</p>
<h3 id="主动控制触发"><a href="#主动控制触发" class="headerlink" title="主动控制触发"></a>主动控制触发</h3><p>增加 <code>manual</code> 配置和 <code>run</code> 方法。</p>
<h3 id="请求频次"><a href="#请求频次" class="headerlink" title="请求频次"></a>请求频次</h3><p>因为是 hooks 的写法，只有依赖更新的时候才会重新发请求，这样的话一些轮询的接口需要借助一个布尔值，定时器每次对布尔值取反来实现，这样很不优雅。</p>
<p>可以增加一个 <code>frequncy</code> 参数，内置一个定时器发送的功能。</p>
<h3 id="延迟展示的额外数据"><a href="#延迟展示的额外数据" class="headerlink" title="延迟展示的额外数据"></a>延迟展示的额外数据</h3><p>某些场景下，我们可能需要一些数据在请求返回结果之后再一起更新，而这些数据不是从返回结果里取的，而是我们手动设置的。</p>
<p>这时候如果我们通过 <code>loading</code> 来进行判断会过于复杂，所以也可以增加一个 <code>extraData</code> 的功能。</p>
<h3 id="SWR"><a href="#SWR" class="headerlink" title="SWR"></a>SWR</h3><p>即请求缓存的功能，在请求回来之前，不是展示空数据，而是展示上一次同样正确请求的数据来预先展示。</p>
<p>这个功能需要用个有 <code>getCache</code> 和 <code>setCache</code> 的库来实现即可，本文用的是 <code>localStorage</code> 的实现方式。</p>
<p>将以上几点修改后，代码如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * useRequest 参数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> IUseRequestProps &#123;</span><br><span class="line">    url: <span class="built_in">string</span>; <span class="comment">// 请求地址</span></span><br><span class="line">    data: IObject; <span class="comment">// 请求参数</span></span><br><span class="line">    extraData?: IObject; <span class="comment">// 额外数据，随着返回数据一起更新</span></span><br><span class="line">    frequence?: <span class="built_in">number</span>; <span class="comment">// 请求频次，单位为毫秒</span></span><br><span class="line">    manual?: <span class="built_in">boolean</span>; <span class="comment">// 是否手动触发</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 被动触发的 fetch hooks</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>param0 请求地址 url，请求参数 data，以及其他配置参数，如请求频次 frequence</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>deps 依赖数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useRequest = (</span><br><span class="line">    &#123;</span><br><span class="line">        url, data, extraData = &#123;&#125;, frequence = -<span class="number">1</span>, manual = <span class="literal">false</span></span><br><span class="line">    &#125;: IUseRequestProps,</span><br><span class="line">    deps: <span class="built_in">any</span>[] = []</span><br><span class="line">) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 序列化，因为是依赖，防止 immutable 对象无限刷新</span></span><br><span class="line">    <span class="keyword">const</span> stringifyData = <span class="built_in">JSON</span>.stringify(data); <span class="comment">// 请求参数</span></span><br><span class="line">    <span class="keyword">const</span> stringifyExtraData = <span class="built_in">JSON</span>.stringify(extraData); <span class="comment">// 额外数据，随着返回数据一起更新</span></span><br><span class="line">    <span class="keyword">const</span> localData = <span class="built_in">localStorage</span>.getItem(<span class="string">`<span class="subst">$&#123;url&#125;</span>/<span class="subst">$&#123;stringifyData&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">const</span> [state, setState] = useState&lt;<span class="built_in">any</span>&gt;(localData ? <span class="built_in">JSON</span>.parse(localData) : <span class="literal">null</span>); <span class="comment">// 返回数据</span></span><br><span class="line">    <span class="keyword">const</span> [loading, setLoading] = useState(!manual); <span class="comment">// 加载中</span></span><br><span class="line">    <span class="keyword">const</span> [error, setError] = useState(<span class="string">&#x27;&#x27;</span>); <span class="comment">// 错误文本</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 因为要加定时器逻辑，所以单独抽离出来</span></span><br><span class="line">    <span class="keyword">const</span> onFetch = useCallback(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        fetchBatch(</span><br><span class="line">            url,</span><br><span class="line">            &#123;</span><br><span class="line">                data: <span class="built_in">JSON</span>.parse(stringifyData)</span><br><span class="line">            &#125;,</span><br><span class="line">            (res: <span class="built_in">any</span>) =&gt; &#123;</span><br><span class="line">                withBatch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> result = &#123; ...res, ...JSON.parse(stringifyExtraData) &#125;;</span><br><span class="line">                    setLoading(<span class="literal">false</span>);</span><br><span class="line">                    setState(result);</span><br><span class="line">                    <span class="built_in">localStorage</span>.setItem(<span class="string">`<span class="subst">$&#123;url&#125;</span>/<span class="subst">$&#123;stringifyData&#125;</span>`</span>, <span class="built_in">JSON</span>.stringify(result)); <span class="comment">// 缓存数据到本地</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            (err: <span class="built_in">Error</span>) =&gt; &#123;</span><br><span class="line">                withBatch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    setLoading(<span class="literal">false</span>);</span><br><span class="line">                    setError(err.message);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;, [url, stringifyData, stringifyExtraData]);</span><br><span class="line"></span><br><span class="line">    useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        setLoading(<span class="literal">true</span>);</span><br><span class="line">        onFetch();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 定时器逻辑</span></span><br><span class="line">        <span class="keyword">if</span> (frequence &amp;&amp; frequence !== -<span class="number">1</span> &amp;&amp; <span class="built_in">Number</span>.isInteger(frequence)) &#123;</span><br><span class="line">            <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(onFetch, <span class="built_in">Math</span>.max(frequence, <span class="number">1000</span>));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;&#125;;</span><br><span class="line">    &#125;, [onFetch, frequence, ...deps]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        data: state,</span><br><span class="line">        setData: setState,</span><br><span class="line">        loading,</span><br><span class="line">        error,</span><br><span class="line">        run: onFetch</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://shenyizhou.github.io/2022/04/17/2022-04-17-%E8%87%AA%E5%8A%A8%E6%89%B9%E9%87%8F%E8%AF%B7%E6%B1%82%EF%BC%885%EF%BC%89%E2%80%94%E2%80%94%20useRequest%20%E7%9A%84%E5%AE%9E%E7%8E%B0/" data-id="cltehmzga008erbab820ghnyd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%B7%E6%B1%82/" rel="tag">请求</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022-04-15-自动批量请求（4）—— 删减重复的请求" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/15/2022-04-15-%E8%87%AA%E5%8A%A8%E6%89%B9%E9%87%8F%E8%AF%B7%E6%B1%82%EF%BC%884%EF%BC%89%E2%80%94%E2%80%94%20%E5%88%A0%E5%87%8F%E9%87%8D%E5%A4%8D%E7%9A%84%E8%AF%B7%E6%B1%82/" class="article-date">
  <time datetime="2022-04-15T14:40:23.000Z" itemprop="datePublished">2022年04月15日</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E7%BB%BC%E5%90%88/">前端综合</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/15/2022-04-15-%E8%87%AA%E5%8A%A8%E6%89%B9%E9%87%8F%E8%AF%B7%E6%B1%82%EF%BC%884%EF%BC%89%E2%80%94%E2%80%94%20%E5%88%A0%E5%87%8F%E9%87%8D%E5%A4%8D%E7%9A%84%E8%AF%B7%E6%B1%82/">自动批量请求（4）—— 删减重复的请求</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我们已经实现了自动把同一时刻的请求合并成多个 fetch，并统一渲染。</p>
<h2 id="存在问题"><a href="#存在问题" class="headerlink" title="存在问题"></a>存在问题</h2><p>但是又遇到了一种新的场景：就是不同组件，发送相同参数的相同请求时，这在原来的场景下，还是会发两个相同的请求。</p>
<p>而想要优化，只能把请求移到外层，通过参数分别透传给两个组件。</p>
<p>那，我们这个 fetch 组件能不能直接把这个工作给做了呢，让用户自由地发送请求，而由 fetch 组件来做优化呢？</p>
<h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><p>我们来思考一下，这个思路，就是把请求删减为一个，而把成功处理和失败回调变成多个，就可以啦。</p>
<p>细节上来说的话，就是遇到同名且相同参数的请求时，原本会作增加新请求操作，而现在直接跳过，同时把回调函数加到对应的成功及失败回调中。</p>
<p>那我们先来第一步：</p>
<h3 id="回调变为数组"><a href="#回调变为数组" class="headerlink" title="回调变为数组"></a>回调变为数组</h3><p>首先是增加一些新的定义：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 成功回调</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">type</span> ISuccessCallback = <span class="function">(<span class="params">obj: IObject</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 失败回调</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">type</span> IErrorCallback = <span class="function">(<span class="params">err: <span class="built_in">Error</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * batch 队列的单元数据信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> IBatchItem &#123;</span><br><span class="line">    name: <span class="built_in">string</span>; <span class="comment">// 请求 url</span></span><br><span class="line">    options: IFetchOptions; <span class="comment">// fetch 的 options 参数</span></span><br><span class="line">    successList: ISuccessCallback[]; <span class="comment">// 成功回调列表</span></span><br><span class="line">    errorList: IErrorCallback[]; <span class="comment">// 错误回调列表</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 同一个队列多个请求组成的 Map，键名是 api</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> IBatchMap &#123;</span><br><span class="line">    [url: <span class="built_in">string</span>]: IBatchItem; <span class="comment">// 每个请求对应的元数据信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后便是处理这些逻辑的地方：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> batchList: IBatchMap[] = []; <span class="comment">// 多个batch请求组成的数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 发送批量请求</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>tempRequestMap 临时缓存的变量，在执行请求回调时，原来的 requestMap 其实已经清空了</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> sendRequestBatch: <span class="function">(<span class="params">tempRequestMap: IBatchMap</span>) =&gt;</span> <span class="built_in">void</span> = (</span><br><span class="line">    tempRequestMap</span><br><span class="line">) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 转化为 batch 请求需要的格式</span></span><br><span class="line">    <span class="keyword">const</span> batchData = <span class="built_in">Object</span>.values(tempRequestMap).reduce(</span><br><span class="line">        (pre: IObject, <span class="attr">cur</span>: IBatchItem) =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123; <span class="attr">name</span>: requestName, options &#125; = cur;</span><br><span class="line">            <span class="keyword">return</span> &#123; ...pre, [requestName]: deepStringify(options.data) &#125;; <span class="comment">// 深度 stringify 对象，batch 请求需要</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;&#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用批处理请求</span></span><br><span class="line">    fetchBase(<span class="string">&#x27;/api/batch&#x27;</span>, &#123;</span><br><span class="line">        data: batchData</span><br><span class="line">    &#125;)</span><br><span class="line">        .then(<span class="function">(<span class="params">res: IBatchResponse</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 用 unstable_batchedUpdates 统一更新，减少渲染次数</span></span><br><span class="line">            withBatch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">Object</span>.keys(res).forEach(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> &#123; code, message, msg, data &#125; = res[key];</span><br><span class="line">                    <span class="keyword">if</span> (!tempRequestMap[key]) &#123;</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">const</span> &#123;</span><br><span class="line">                        successList: successCallbackList,</span><br><span class="line">                        errorList: errorCallbackList</span><br><span class="line">                    &#125; = tempRequestMap[key];</span><br><span class="line">                    <span class="keyword">if</span> (code !== <span class="number">200</span>) &#123;</span><br><span class="line">                        <span class="keyword">const</span> err: IErrorResponse = <span class="keyword">new</span> <span class="built_in">Error</span>(</span><br><span class="line">                            (message || msg) ?? <span class="string">&#x27;系统繁忙，请稍后再试&#x27;</span></span><br><span class="line">                        );</span><br><span class="line">                        err.code = code;</span><br><span class="line">                        errorCallbackList.forEach(</span><br><span class="line">                            (errorCallback: IErrorCallback) =&gt; &#123;</span><br><span class="line">                                <span class="keyword">if</span> (errorCallback) &#123;</span><br><span class="line">                                    errorCallback(err);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        );</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        successCallbackList.forEach(</span><br><span class="line">                            (successCallback: ISuccessCallback) =&gt; &#123;</span><br><span class="line">                                <span class="keyword">if</span> (successCallback) &#123;</span><br><span class="line">                                    successCallback(data);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        );</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function">(<span class="params">err: <span class="built_in">Error</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 如果 batch 请求报错了，则给每个请求都返回 batch 请求的报错</span></span><br><span class="line">            <span class="built_in">Object</span>.keys(tempRequestMap).forEach(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> &#123; <span class="attr">errorList</span>: errorCallbackList &#125; = tempRequestMap[key];</span><br><span class="line">                errorCallbackList.forEach(<span class="function">(<span class="params">errorCallback: IErrorCallback</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (errorCallback) &#123;</span><br><span class="line">                        errorCallback(err);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="跳过同参数请求"><a href="#跳过同参数请求" class="headerlink" title="跳过同参数请求"></a>跳过同参数请求</h3><p>第二步便是在 <code>addRequest</code> 增加跳过逻辑和增加回调操作：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 增加请求到队列中</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>requestItem 单个请求信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> addRequest: <span class="function">(<span class="params">requestItem: IRequestItem</span>) =&gt;</span> <span class="built_in">void</span> = <span class="function">(<span class="params">requestItem</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; name, options, success, error &#125; = requestItem;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 寻找相同参数的相同请求，通过 name 和序列化的请求参数进行比较</span></span><br><span class="line">    <span class="keyword">const</span> stringifyData = <span class="built_in">JSON</span>.stringify(options?.data);</span><br><span class="line">    <span class="keyword">const</span> equalIndex = <span class="built_in">Math</span>.max(</span><br><span class="line">        -<span class="number">1</span>,</span><br><span class="line">        ...batchList.map(<span class="function">(<span class="params">item: IBatchMap, index: <span class="built_in">number</span></span>) =&gt;</span></span><br><span class="line">            item[name] &amp;&amp;</span><br><span class="line">            <span class="built_in">JSON</span>.stringify(item[name].options?.data) === stringifyData</span><br><span class="line">                ? index</span><br><span class="line">                : -<span class="number">1</span></span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">if</span> (equalIndex &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">        batchList[equalIndex][name].successList.push(success);</span><br><span class="line">        batchList[equalIndex][name].errorList.push(error);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// batch 元数据</span></span><br><span class="line">    <span class="keyword">const</span> batchItem = &#123;</span><br><span class="line">        name,</span><br><span class="line">        options,</span><br><span class="line">        successList: [success],</span><br><span class="line">        errorList: [error]</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查找最后一个含有对应 name 的请求对象，查找不到时默认赋值为 -1，这样当队列为空即数组长度为0时，lastIndex + 1 也为 0</span></span><br><span class="line">    <span class="keyword">const</span> lastIndex = <span class="built_in">Math</span>.max(</span><br><span class="line">        -<span class="number">1</span>,</span><br><span class="line">        ...batchList.map(<span class="function">(<span class="params">item: IBatchMap, index: <span class="built_in">number</span></span>) =&gt;</span></span><br><span class="line">            item[name] ? index : -<span class="number">1</span></span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 后略 */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://shenyizhou.github.io/2022/04/15/2022-04-15-%E8%87%AA%E5%8A%A8%E6%89%B9%E9%87%8F%E8%AF%B7%E6%B1%82%EF%BC%884%EF%BC%89%E2%80%94%E2%80%94%20%E5%88%A0%E5%87%8F%E9%87%8D%E5%A4%8D%E7%9A%84%E8%AF%B7%E6%B1%82/" data-id="cltehmzg9008brbab5w38620j" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%B7%E6%B1%82/" rel="tag">请求</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2021-07-18-如何构建自己的知识体系" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/07/18/2021-07-18-%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/" class="article-date">
  <time datetime="2021-07-18T04:50:59.000Z" itemprop="datePublished">2021年07月18日</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%9F%A5%E8%AF%86/">知识</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/07/18/2021-07-18-%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/">如何构建自己的知识体系</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="什么是知识体系？"><a href="#什么是知识体系？" class="headerlink" title="什么是知识体系？"></a>什么是知识体系？</h3><ul>
<li>知识体系是层层划分的<ul>
<li>  比如说每篇 markdown 都会有类别和标签，类别可能就是二级分类，比起一级分类更有区分度</li>
<li>  而标签就是三级或者四级分类，是最有代表性的</li>
</ul>
</li>
<li>知识体系是有主次的<ul>
<li>  最宏观可以分为事业心和好奇心，事业心是赖以谋生的知识，为主，而好奇心是带给自己快乐的知识，为次</li>
<li>继续划分事业心<ul>
<li>  比如说对我来说大方向是技术，为主，但产运之类的也会接触到，为次</li>
<li>  再细分到技术，前端是本行，为主，后端、客户端之类的也得了解，为次</li>
<li>  再具体到前端，多年的工作经验一定会聚焦到几个领域，这是深度，为主，而广度，为次</li>
<li>  这里着重说一下，不要给自己设界限，不然世界真的会给自己设界限，前端跳产品也是很稀疏平常的</li>
</ul>
</li>
</ul>
</li>
<li>知识体系是动态的<ul>
<li>  人无法从一开始就知道自己这辈子的知识体系，就算有参考，那也只是别人的知识体系</li>
<li>要记住，没有学习只是进行分类的，不是自己知识体系内的东西，只有了解了才能纳入<ul>
<li>  所以对知识体系内的东西，也有进行打标签，分为知道、了解、熟悉、精通四个级别</li>
<li>  「知道」和「了解」只是停留在学术层面，而「熟悉」和「精通」则是到达了行动层面</li>
</ul>
</li>
<li>随着自己知识了解的深入，又会产生新的知识和划分<ul>
<li>  比如说我的行业是前端，但是对不了解这行的来说，所有前后端客户端的知识可能都统称为计算机</li>
<li>  而对我来说，前端本身也还有多个方面能继续细分成知识体系</li>
</ul>
</li>
<li>知识体系不需要是全盘的、完整的，而是适用于个人的<ul>
<li>  一个人穷极一生，也无法领略尽整个世界的知识体系，所以只要构建个人自己的即可</li>
</ul>
</li>
</ul>
</li>
<li>知识不是载体<ul>
<li>  媒介或渠道，也能被分类进知识体系吗？比如说，书籍和游戏</li>
<li>按照我的理解，书是知识的载体，所以不管什么书，都有其对应的知识分类<ul>
<li>  按照图书馆 22 个分类，除了文学，其他分类都是对应领域的知识，且我本身对知识体系的划分也借鉴于此</li>
<li>  而文学，比如说小说，对应的其实就是故事，故事分为讲故事的能力，以及背后所蕴含的道理，这都是知识</li>
</ul>
</li>
<li>  而游戏，它不是一种载体，它本身就是一种知识，他有其自己的分类</li>
</ul>
</li>
</ul>
<h3 id="为什么要构建知识体系？"><a href="#为什么要构建知识体系？" class="headerlink" title="为什么要构建知识体系？"></a>为什么要构建知识体系？</h3><ul>
<li>  因为原有的知识都是碎片化的，没法串联或者宏观管理起来，导致对自己的认知也不够全面</li>
<li>  所以构建知识体系，是为了更好地认识自我，改变自我，给自我创立一个终身目标</li>
</ul>
<h3 id="怎么构建知识体系？"><a href="#怎么构建知识体系？" class="headerlink" title="怎么构建知识体系？"></a>怎么构建知识体系？</h3><p>一言以蔽之，学而思，思而行</p>
<ul>
<li>知与行的关系<ul>
<li>  不是说不「行」的知识就是不行，而是只有「行」了才是自己的知识</li>
</ul>
</li>
<li>  时而复盘</li>
<li>只学让自己触动的<ul>
<li>  重点是 +1，而不是每次都从 0 变成 1</li>
<li>  让自己触动的，才是自己舒适区边界的知识，触动不了的，可能离自己太远了不必急于一时去掌握</li>
<li>  所有事情都采用「五分钟」法则，先尝试让自己只做五分钟，而且只做自己感兴趣的</li>
</ul>
</li>
<li>看的是知识，学的是感受<ul>
<li>  重点是自己对知识的反馈和思考，这些是比知识本身更重要的东西，这才是自己的</li>
</ul>
</li>
<li>怎样才算「学会」？<ul>
<li>  能用小黄鸭学习法，解释给别人</li>
<li>  在实际生活中能使用</li>
<li>  多次使用</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://shenyizhou.github.io/2021/07/18/2021-07-18-%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/" data-id="cltehmzg70083rbabdfjrfx4z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/" rel="tag">知识体系</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2021-07-13-读书" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/07/13/2021-07-13-%E8%AF%BB%E4%B9%A6/" class="article-date">
  <time datetime="2021-07-13T05:36:15.000Z" itemprop="datePublished">2021年07月13日</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AF%BB%E4%B9%A6/">读书</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/07/13/2021-07-13-%E8%AF%BB%E4%B9%A6/">怎么写书评</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="怎么写读书感悟？"><a href="#怎么写读书感悟？" class="headerlink" title="怎么写读书感悟？"></a>怎么写读书感悟？</h3><ul>
<li>  书中内容作引导</li>
<li>  自己的经历，例子要具体，加以评论</li>
<li>  自己的思考/观点，反思或共鸣</li>
<li>  总结或建议 (积极正向)</li>
</ul>
<h3 id="怎么写荐书稿？"><a href="#怎么写荐书稿？" class="headerlink" title="怎么写荐书稿？"></a>怎么写荐书稿？</h3><ul>
<li>  看当当、京东的评论</li>
<li>  介绍作者和书的关系</li>
<li>  书里有什么</li>
<li>  印象深刻的句子</li>
<li>  看完书的感受</li>
<li>  这本书为什么值得一看</li>
</ul>
<h3 id="怎么写书评？"><a href="#怎么写书评？" class="headerlink" title="怎么写书评？"></a>怎么写书评？</h3><ul>
<li>先中间，再两边<ul>
<li>  开头，类似荐书稿，不超过 300 字</li>
<li>中间，找 3 - 5 个启发点展开<ul>
<li>  有趣、有用、新鲜</li>
</ul>
</li>
<li>  结尾，总结感受，不超过 100 字</li>
</ul>
</li>
<li>  先按照自己感兴趣的点写</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://shenyizhou.github.io/2021/07/13/2021-07-13-%E8%AF%BB%E4%B9%A6/" data-id="cltehmzg6007yrbab137e1zlc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6/" rel="tag">读书</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2021-03-24-1-不出某件装备的胜率" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/24/2021-03-24-1-%E4%B8%8D%E5%87%BA%E6%9F%90%E4%BB%B6%E8%A3%85%E5%A4%87%E7%9A%84%E8%83%9C%E7%8E%87/" class="article-date">
  <time datetime="2021-03-23T18:28:11.000Z" itemprop="datePublished">2021年03月24日</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B8%B8%E6%88%8F/">游戏</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/03/24/2021-03-24-1-%E4%B8%8D%E5%87%BA%E6%9F%90%E4%BB%B6%E8%A3%85%E5%A4%87%E7%9A%84%E8%83%9C%E7%8E%87/">1 - 不出某件装备的胜率</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>首先有个看出装胜率的<a target="_blank" rel="noopener" href="https://pvp.91m.top/ranking?type=0&bid=4&cid=2&did=0&refresh=1">网站</a></p>
<p>一般想要找到最佳出装的思路，肯定是按照胜率倒排选 6 件；但实际上，这几件出装的出场率一般都比较低，数据相对不够有说服力，所以我们把出场率也考虑进去</p>
<p>那么我们反过来思考，不出某件装备时胜率有多少，如果特别低的话，是不是就说明务必要出了，那我们假设有装备 A，则：</p>
<p><code>不出A的胜率 = (英雄总胜率 - A出场率 * A胜率) / (100% - A出场率)</code></p>
<p>比如芈月，整体胜率 52%，<img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1240.png" alt="噬神之书" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" />出场率 80%，<img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1240.png" alt="噬神之书" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" />胜率 56%，可以计算出：不出<img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1240.png" alt="噬神之书" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" />芈月的胜率为 36%</p>
<p>可见非常的低，所以可以认为<img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1240.png" alt="噬神之书" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" />是芈月不得不出的一件装备</p>
<p>那么再来一个逻辑题，100% - 不出某件装备的胜率 = ?</p>
<p>我的直觉告诉我这个数据很可靠，但是我的小脑袋瓜理解不了这个概率是什么</p>
<p>以下的代码就是从数据网站计算该概率的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPer</span>(<span class="params">per = <span class="number">50</span></span>) </span>&#123;</span><br><span class="line">    [</span><br><span class="line">        ...document.getElementsByClassName(<span class="string">&#x27;vxe-table--body&#x27;</span>)[<span class="number">3</span>].children[<span class="number">1</span>]</span><br><span class="line">            .children</span><br><span class="line">    ]</span><br><span class="line">        .map(<span class="function">(<span class="params">child</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> arr = [...child.children];</span><br><span class="line">            <span class="keyword">const</span> img = <span class="string">`padding: 10px 10px;background-image: url(<span class="subst">$&#123;arr[<span class="number">1</span>].children[<span class="number">0</span>].children[<span class="number">0</span>].src&#125;</span>);background-size: contain;background-repeat: no-repeat;color: transparent;`</span>;</span><br><span class="line">            <span class="keyword">const</span> perUse = <span class="built_in">Number</span>(arr[<span class="number">4</span>].children[<span class="number">0</span>].children[<span class="number">0</span>].innerHTML);</span><br><span class="line">            <span class="keyword">const</span> perWin = <span class="built_in">Number</span>(arr[<span class="number">5</span>].children[<span class="number">0</span>].children[<span class="number">0</span>].innerHTML);</span><br><span class="line">            <span class="keyword">const</span> perOppoLose =</span><br><span class="line">                (per - (perUse * perWin) / <span class="number">100</span>) /</span><br><span class="line">                (<span class="number">1</span> - <span class="built_in">Math</span>.min(perUse, <span class="number">99.99</span>) / <span class="number">100</span>);</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                img,</span><br><span class="line">                p: perOppoLose</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;)</span><br><span class="line">        .sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (a.p &lt; b.p) &#123;</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (a.p &gt; b.p) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .forEach(<span class="function">(<span class="params">&#123; img, p &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;%c+&#x27;</span>, img, <span class="string">`<span class="subst">$&#123;(<span class="number">100</span> - p).toFixed(<span class="number">2</span>)&#125;</span>%`</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我大致计算了几位我准备使用英雄出装的该概率排序，准备排位实践下：</p>
<ul>
<li>中路<ul>
<li>  杨玉环：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1236.png" alt="巫术法杖" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 67.18% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1232.png" alt="博学者之怒" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 62.97% <img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1231.png" alt="虚无法杖" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.90% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1226.png" alt="圣杯" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.63% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1227.png" alt="炽热守护者" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 46.76% <img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1233.png" alt="回响之杖" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 46.38% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1424.png" alt="秘法之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 45.97%</li>
<li>  嫦&nbsp;&nbsp;&nbsp;&nbsp;娥：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1237.png" alt="时之预言" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 64.32% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1232.png" alt="博学者之怒" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.24% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1236.png" alt="巫术法杖" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.36% <img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1240.png" alt="噬神之书" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.68% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1227.png" alt="炽热守护者" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 47.43% <img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1231.png" alt="虚无法杖" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 47.06% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1424.png" alt="秘法之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 46.12%</li>
<li>  西&nbsp;&nbsp;&nbsp;&nbsp;施：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1235.png" alt="痛苦面具" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.24% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1234.png" alt="凝冰之息" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.89% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1336.png" alt="极寒风暴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.76% <img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1240.png" alt="噬神之书" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.35% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1422.png" alt="抵抗之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 47.98% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1335.png" alt="魔女斗篷" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 47.85% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1239.png" alt="辉月" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 47.46% <img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1231.png" alt="虚无法杖" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 47.44%</li>
<li>  武则天：<img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1231.png" alt="虚无法杖" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.21% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1232.png" alt="博学者之怒" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.53% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1235.png" alt="痛苦面具" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.99% <img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1240.png" alt="噬神之书" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.95% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1239.png" alt="辉月" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.75% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1423.png" alt="冷静之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.55% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1238.png" alt="贤者之书" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.27% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1424.png" alt="秘法之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.04%</li>
<li>  弈&nbsp;&nbsp;&nbsp;&nbsp;星：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1236.png" alt="巫术法杖" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 56.38% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1232.png" alt="博学者之怒" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.28% <img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1231.png" alt="虚无法杖" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.14% <img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1240.png" alt="噬神之书" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.68% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1235.png" alt="痛苦面具" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.24% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1727.png" alt="日暮之流" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.60% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1424.png" alt="秘法之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.58%</li>
<li>  周&nbsp;&nbsp;&nbsp;&nbsp;瑜：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1235.png" alt="痛苦面具" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 69.63% <img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1240.png" alt="噬神之书" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 53.58% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1336.png" alt="极寒风暴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.82% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1424.png" alt="秘法之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.68% <img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1231.png" alt="虚无法杖" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.55% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1234.png" alt="凝冰之息" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.47% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1239.png" alt="辉月" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.29 <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1727.png" alt="日暮之流" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.25%</li>
</ul>
</li>
<li>发育路<ul>
<li>  李元芳：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1133.png" alt="无尽战刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 67.20% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1132.png" alt="泣血之刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 63.46% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1141.png" alt="逐日之弓" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.36% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1155.png" alt="破晓" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.16% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1422.png" alt="抵抗之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.73% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1137.png" alt="暗影战斧" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 47.97%</li>
<li>  后&nbsp;&nbsp;&nbsp;&nbsp;羿：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1133.png" alt="无尽战刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 71.20% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1141.png" alt="逐日之弓" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 56.87% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1135.png" alt="闪电匕首" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 53.18% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1155.png" alt="破晓" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.20% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1132.png" alt="泣血之刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.39% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1126.png" alt="末世" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.85% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1422.png" alt="抵抗之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.14%</li>
<li>  狼&nbsp;&nbsp;&nbsp;&nbsp;狗：(<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1133.png" alt="无尽战刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" />有点怪)<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1134.png" alt="宗师之力" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 70.18% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1155.png" alt="破晓" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 67.96% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1132.png" alt="泣血之刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 63.10% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1422.png" alt="抵抗之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.10% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1135.png" alt="闪电匕首" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.08% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1141.png" alt="逐日之弓" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.54% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1127.png" alt="名刀·司命" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.19%</li>
<li>  鲁&nbsp;&nbsp;&nbsp;&nbsp;班：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1133.png" alt="无尽战刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 99.99% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1155.png" alt="破晓" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 54.26% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1132.png" alt="泣血之刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 54.25% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1135.png" alt="闪电匕首" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.87% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1126.png" alt="末世" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.86% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1137.png" alt="暗影战斧" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.27% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1138.png" alt="破军" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.12% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1134.png" alt="宗师之力" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 47.97%</li>
<li>  伽&nbsp;&nbsp;&nbsp;&nbsp;罗：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1133.png" alt="无尽战刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 73.22% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1155.png" alt="破晓" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 55.20% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1136.png" alt="影刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.82% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1132.png" alt="泣血之刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.33% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1141.png" alt="逐日之弓" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.23% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1135.png" alt="闪电匕首" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.38% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1126.png" alt="末世" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.04% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1422.png" alt="抵抗之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.95%</li>
<li>  阿&nbsp;&nbsp;&nbsp;&nbsp;离：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1133.png" alt="无尽战刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 72.92% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1126.png" alt="末世" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 63.44% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1141.png" alt="逐日之弓" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 58.81% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1155.png" alt="破晓" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 54.85% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1422.png" alt="抵抗之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.99% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1136.png" alt="影刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.59% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1137.png" alt="暗影战斧" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.46%</li>
<li>  狄仁杰：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1133.png" alt="无尽战刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 69.10% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1126.png" alt="末世" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 57.96% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1155.png" alt="破晓" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 56.39% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1141.png" alt="逐日之弓" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 54.18% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1132.png" alt="泣血之刃" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.27% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1335.png" alt="魔女斗篷" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.23% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1135.png" alt="闪电匕首" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.10% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1333.png" alt="不祥征兆" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.99%</li>
</ul>
</li>
<li>游走<ul>
<li>  大&nbsp;&nbsp;&nbsp;&nbsp;乔：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1336.png" alt="极寒风暴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.76% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1721.png" alt="极影" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.72% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1335.png" alt="魔女斗篷" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 48.76% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1722.png" alt="救赎之翼" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 46.10% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1422.png" alt="抵抗之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 45.72% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1333.png" alt="不祥征兆" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 45.46% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1234.png" alt="凝冰之息" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 45.06%</li>
<li>  太&nbsp;&nbsp;&nbsp;&nbsp;乙：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1721.png" alt="极影" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.89% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1335.png" alt="魔女斗篷" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.88% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1336.png" alt="极寒风暴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.00% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1422.png" alt="抵抗之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.58% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1332.png" alt="霸者重装" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.49% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1723.png" alt="奔狼纹章" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.35% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1333.png" alt="不祥征兆" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.06%</li>
<li>  蔡文姬：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1226.png" alt="圣杯" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 73.78% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1724.png" alt="近卫荣耀" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 56.93% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1232.png" alt="博学者之怒" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 54.84% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1423.png" alt="冷静之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.77% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1237.png" alt="时之预言" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.21% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1238.png" alt="贤者之书" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.95% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1721.png" alt="极影" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.52% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1722.png" alt="救赎之翼" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.14%</li>
<li>  鲁&nbsp;&nbsp;&nbsp;&nbsp;大：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1336.png" alt="极寒风暴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 60.37% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1721.png" alt="极影" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 53.19% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1335.png" alt="魔女斗篷" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.55% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1422.png" alt="抵抗之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.74% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1723.png" alt="奔狼纹章" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.51% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1332.png" alt="霸者重装" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.73% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1423.png" alt="冷静之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.46% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1333.png" alt="不祥征兆" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.46%</li>
<li>  鬼谷子：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1336.png" alt="极寒风暴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 56.01% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1422.png" alt="抵抗之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 54.63% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1721.png" alt="极影" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 53.81% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1723.png" alt="奔狼纹章" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.25% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1335.png" alt="魔女斗篷" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.83% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1724.png" alt="近卫荣耀" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.69% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1722.png" alt="救赎之翼" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.55% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1332.png" alt="霸者重装" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 49.53%</li>
<li>  牛&nbsp;&nbsp;&nbsp;&nbsp;魔：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1333.png" alt="不祥征兆" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 53.40% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1724.png" alt="近卫荣耀" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 53.36% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1422.png" alt="抵抗之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.30% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1335.png" alt="魔女斗篷" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.44% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1722.png" alt="救赎之翼" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.30% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1336.png" alt="极寒风暴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.25% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1347.png" alt="永夜守护" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.20%</li>
<li>  东&nbsp;&nbsp;&nbsp;&nbsp;皇：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1332.png" alt="霸者重装" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 58.63% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1721.png" alt="极影" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.05% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1336.png" alt="极寒风暴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.30% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1723.png" alt="奔狼纹章" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.15% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1347.png" alt="永夜守护" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.79% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1422.png" alt="抵抗之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.74%</li>
<li>  刘&nbsp;&nbsp;&nbsp;&nbsp;禅：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1336.png" alt="极寒风暴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 69.72% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1721.png" alt="极影" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 57.69% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1335.png" alt="魔女斗篷" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.04% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1347.png" alt="永夜守护" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.00% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1333.png" alt="不祥征兆" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.11% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1723.png" alt="奔狼纹章" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.97% <img src="//image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/13310.png" alt="冰痕之握" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.59% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1332.png" alt="霸者重装" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 50.55%</li>
<li>  孙&nbsp;&nbsp;&nbsp;&nbsp;膑：<img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1226.png" alt="圣杯" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 59.12% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1721.png" alt="极影" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 53.33% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1336.png" alt="极寒风暴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 53.27% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1335.png" alt="魔女斗篷" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.55% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1724.png" alt="近卫荣耀" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.42% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1333.png" alt="不祥征兆" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 52.06% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1722.png" alt="救赎之翼" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.57% <img src="https://image.ttwz.qq.com/h5/images/bangbang/mobile/wzry/equip/1422.png" alt="抵抗之靴" style="display:inline-block;margin:0 auto;width:22px;height:22px;line-height:22px;box-shadow:none" /> 51.47%</li>
</ul>
</li>
</ul>
<h1 id="英雄"><a href="#英雄" class="headerlink" title="英雄"></a>英雄</h1><p>将这个思路拓展下，对英雄也采用不选取时失败的概率来计算</p>
<ul>
<li>  对抗路：马超、元歌、木兰、芈月、白起（、司空震</li>
<li>  中&nbsp;&nbsp;&nbsp;&nbsp;路：嫦娥、玉环、火舞、西施、周瑜（、武则天、貂蝉、司马懿、婉儿、奕星</li>
<li>  发育路：阿离、后羿、元芳、鲁班、狄仁杰（、蒙犽、伽罗、狼狗</li>
<li>  打&nbsp;&nbsp;&nbsp;&nbsp;野：露娜、老虎、露露、阿古朵、刘备（、雅典娜、镜、阿珂、云中君</li>
<li>  辅&nbsp;&nbsp;&nbsp;&nbsp;助：大乔、鲁大、太乙、盾山、牛魔（、蔡文姬、鬼谷子</li>
</ul>
<p>这不就是版本答案嘛？</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://shenyizhou.github.io/2021/03/24/2021-03-24-1-%E4%B8%8D%E5%87%BA%E6%9F%90%E4%BB%B6%E8%A3%85%E5%A4%87%E7%9A%84%E8%83%9C%E7%8E%87/" data-id="cltehmzg80086rbab7xz0eo2r" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%8E%8B%E8%80%85%E8%8D%A3%E8%80%80/" rel="tag">王者荣耀</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2021-03-05-自动批量请求（3）—— 同时发送多个 batch 请求" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/05/2021-03-05-%E8%87%AA%E5%8A%A8%E6%89%B9%E9%87%8F%E8%AF%B7%E6%B1%82%EF%BC%883%EF%BC%89%E2%80%94%E2%80%94%20%E5%90%8C%E6%97%B6%E5%8F%91%E9%80%81%E5%A4%9A%E4%B8%AA%20batch%20%E8%AF%B7%E6%B1%82/" class="article-date">
  <time datetime="2021-03-05T14:37:50.000Z" itemprop="datePublished">2021年03月05日</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E7%BB%BC%E5%90%88/">前端综合</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/03/05/2021-03-05-%E8%87%AA%E5%8A%A8%E6%89%B9%E9%87%8F%E8%AF%B7%E6%B1%82%EF%BC%883%EF%BC%89%E2%80%94%E2%80%94%20%E5%90%8C%E6%97%B6%E5%8F%91%E9%80%81%E5%A4%9A%E4%B8%AA%20batch%20%E8%AF%B7%E6%B1%82/">自动批量请求（3）—— 同时发送多个 batch 请求</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我们已经实现了自动把同一时刻的请求合并，并统一渲染。</p>
<h2 id="存在问题"><a href="#存在问题" class="headerlink" title="存在问题"></a>存在问题</h2><p>老样子，先来看图回顾一下（假设一次 EventLoop 占用 5 个时间单位，请求回复也需要 5 个时间单位）：</p>
<p><img src="https://p5.music.126.net/obj/wo3DlcOGw6DClTvDisK1/5733697576/db12/dbbc/38e4/b51d60482683002dbae929ffe5c329c5.png" alt="问题图"></p>
<p>由图可见，我们遇到了一个新的问题：</p>
<blockquote>
<p>同一时刻，最多只能合并一个 batch 请求，导致多次重复的同类型请求，无法合并成多个 batch 请求（如上图的 2 个 A、2 个 B，最后只合成了 1 个 batch、1 个 A 和 1 个 B，而非 2 个 batch）。</p>
</blockquote>
<p>我们的期望是尽可能合并 batch 请求，如上图第 3、第 4 个请求可以合并成一个新的 batch 请求，并在 5 个时间单位的时候发送。</p>
<p>所以本文对原有的代码又做了一次优化。</p>
<h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><p>因为原先是用一个对象来保存多个请求的信息，键名容易重，这才导致无法实现。</p>
<p>所以我们的方案就是，把原有的对象形式转为数组形式，以此来存储信息，而数组的长度就代表了 <code>batch</code> 请求的次数。</p>
<blockquote>
<p>注：之所以没法只用一个 <code>batch</code> 请求的原因是，<code>batch</code> 请求的参数无法支持同时处理多个同名请求。</p>
</blockquote>
<p>衔接上一篇的 <code>IRequestMap</code> 对象，我们定义如下数组来代表 batch 队列：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 单个请求的元数据信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> IRequestItem &#123;</span><br><span class="line">    name: <span class="built_in">string</span>; <span class="comment">// 请求 url</span></span><br><span class="line">    data: IObject; <span class="comment">// 深入 stringify 之后的请求参数</span></span><br><span class="line">    success: <span class="function">(<span class="params">obj: IObject</span>) =&gt;</span> <span class="built_in">void</span>; <span class="comment">// 成功回调</span></span><br><span class="line">    error: <span class="function">(<span class="params">err: <span class="built_in">Error</span></span>) =&gt;</span> <span class="built_in">void</span>; <span class="comment">// 错误回调</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 同一个队列多个请求组成的 Map，键名是 api</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> IRequestMap &#123;</span><br><span class="line">    [url: <span class="built_in">string</span>]: IRequestItem; <span class="comment">// 每个请求对应的元数据信息</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> batchList: IRequestMap[] = []; <span class="comment">// 多个batch请求组成的数组</span></span><br></pre></td></tr></table></figure>

<p>在我们编写 batch 队列处理的逻辑前，不妨先考虑一下，当一个新的请求，即 <code>IRequestItem</code> 对象进来时，我们该如何处理。</p>
<p><img src="https://p5.music.126.net/obj/wo3DlcOGw6DClTvDisK1/5733694442/7dd1/8a80/432e/8a099006490216163e46fef3c734e0e5.png" alt="流程图"></p>
<p>所以 <code>addRequest</code> 可调整为如下写法：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 增加请求到队列中</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>requestItem 单个请求信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> addRequest: <span class="function">(<span class="params">requestItem: IRequestItem</span>) =&gt;</span> <span class="built_in">void</span> = <span class="function">(<span class="params">requestItem</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; name &#125; = requestItem;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查找最后一个含有对应 name 的请求对象，查找不到时默认赋值为 -1，这样当队列为空即数组长度为0时，lastIndex + 1 也为 0</span></span><br><span class="line">    <span class="keyword">const</span> lastIndex = <span class="built_in">Math</span>.max(</span><br><span class="line">        -<span class="number">1</span>,</span><br><span class="line">        ...batchList.map(<span class="function">(<span class="params">item: IRequestMap, index: <span class="built_in">number</span></span>) =&gt;</span> (item[name] ? index : -<span class="number">1</span>))</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在 batch 队列为空，或batch 队列的所有元素都包含该 name 时，都是创建一个新 Map</span></span><br><span class="line">    <span class="keyword">if</span> (lastIndex + <span class="number">1</span> === batchList.length) &#123;</span><br><span class="line">        batchList.push(&#123;</span><br><span class="line">            name: requestItem</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (lastIndex) &#123;</span><br><span class="line">        <span class="comment">// 否则在第一个未出现该请求的 Map 增加该请求</span></span><br><span class="line">        batchList[lastIndex + <span class="number">1</span>][name] = requestItem;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>相应地，<code>clearRequest</code> 也可以简单调整成这样：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 清空请求队列</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> clearRequest: <span class="function">() =&gt;</span> <span class="built_in">void</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    batchList = [];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>但是，<code>clearRequest</code> 的调用时机却发生了变化。</p>
<p>我们再来梳理一下，之前 <code>clearRequest</code> 是在 <code>Promise.resolve().then()</code> 的回调中，发完请求之后执行。</p>
<p>但是现在同一个 EventLoop 会包含多个 batch 队列，而每个 batch 队列都对应一个 <code>Promise.resolve()</code>，也就是说，我们必然不能在每个 <code>Promise.resolve().then()</code> 的回调中都执行清空队列的操作，而是只能在最后一个中执行。</p>
<p>而这样，又暴露了一个新的问题，那就是创建 <code>Promise.resolve()</code> 的时机：之前是每个 EventLoop 的第一个请求添加到队列的时候执行，而现在变成了每当 batch 队列添加新元素时都应该执行。</p>
<p>我们期盼的场景是这样（假设一次 EventLoop 占用 5 个时间单位，请求回复也需要 5 个时间单位）：</p>
<p><img src="https://p6.music.126.net/obj/wo3DlcOGw6DClTvDisK1/5733691305/5f37/8008/3d57/163af94d8deaccd2de343f7643da25dc.png" alt="期望图"></p>
<p>于是，我们将发送请求的逻辑迁移到 <code>addRequest</code> 创建 batch 队列的逻辑中：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (lastIndex + <span class="number">1</span> === batchList.length) &#123;</span><br><span class="line">    batchList.push(&#123;</span><br><span class="line">        [name]: requestItem</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 同时也要创建一个新的 Promise</span></span><br><span class="line">    <span class="built_in">Promise</span>.resolve().then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 缓存的 lastIndex 其实是当前 Map 前一个，为空是 lastIndex 也为 -1，lastIndex + 1 即为当前值</span></span><br><span class="line">        <span class="keyword">const</span> requestMap = batchList[lastIndex + <span class="number">1</span>];</span><br><span class="line">        <span class="comment">// 当数量大于 1 才启用 batch 请求</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Object</span>.keys(requestMap).length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            sendRequestBatch(requestMap);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 等于 1 时，则降级到正常请求发送</span></span><br><span class="line">            fetch(name, options).then(success, error);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 清空变量，lastIndex + 1 为当前值，lastIndex + 2 即为数组当前长度，相等即为最后一个 batch 队列</span></span><br><span class="line">        <span class="keyword">if</span> (lastIndex + <span class="number">2</span> === batchList.length) &#123;</span><br><span class="line">            clearRequest();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同时，我们也可以把累赘的 <code>batchFlag</code> 给去掉。最后，生成的 <code>fetchBatch</code> 简直简得不能再简：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自动批处理及批量更新的 fetch，通过闭包保存一些变量</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> fetchBatch = (<span class="function"><span class="keyword">function</span> <span class="title">anonymousFetch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> batchList: IRequestMap[] = []; <span class="comment">// 多个batch请求组成的数组</span></span><br><span class="line">    <span class="keyword">const</span> sendRequestBatch = <span class="function">() =&gt;</span> &#123;&#125;; <span class="comment">/* 见上述代码 */</span></span><br><span class="line">    <span class="keyword">const</span> addRequest = <span class="function">() =&gt;</span> &#123;&#125;; <span class="comment">/* 见上述代码 */</span></span><br><span class="line">    <span class="keyword">const</span> clearRequest = <span class="function">() =&gt;</span> &#123;&#125;; <span class="comment">/* 见上述代码 */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 实际返回匿名函数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">anonymous</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">        name: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>, <span class="comment">// 透传 api 地址</span></span></span></span><br><span class="line"><span class="function"><span class="params">        options: IFetchOptions = &#123; data: &#123;&#125; &#125;, <span class="comment">// 透传 options 参数对象，格式为 &#123; data: &#123;&#125; &#125;</span></span></span></span><br><span class="line"><span class="function"><span class="params">        success: (obj: IObject) =&gt; <span class="built_in">void</span> = noop, <span class="comment">// 成功回调</span></span></span></span><br><span class="line"><span class="function"><span class="params">        error: (err: <span class="built_in">Error</span>) =&gt; <span class="built_in">void</span> = noop <span class="comment">// 错误回调</span></span></span></span><br><span class="line"><span class="function"><span class="params">    </span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 增加请求到队列中</span></span><br><span class="line">        addRequest(&#123;</span><br><span class="line">            name,</span><br><span class="line">            options,</span><br><span class="line">            success,</span><br><span class="line">            error</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>

<p>试验了一下，就可以在同一个 EventLoop 中发送多次 batch 请求啦~</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://shenyizhou.github.io/2021/03/05/2021-03-05-%E8%87%AA%E5%8A%A8%E6%89%B9%E9%87%8F%E8%AF%B7%E6%B1%82%EF%BC%883%EF%BC%89%E2%80%94%E2%80%94%20%E5%90%8C%E6%97%B6%E5%8F%91%E9%80%81%E5%A4%9A%E4%B8%AA%20batch%20%E8%AF%B7%E6%B1%82/" data-id="cltehmzg5007wrbabau8x1glr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%B7%E6%B1%82/" rel="tag">请求</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2021-02-24-threejs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/02/24/2021-02-24-threejs/" class="article-date">
  <time datetime="2021-02-24T08:56:35.000Z" itemprop="datePublished">2021年02月24日</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/02/24/2021-02-24-threejs/">js 3d 学习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h3 id="渲染器（WebGLRender）"><a href="#渲染器（WebGLRender）" class="headerlink" title="渲染器（WebGLRender）"></a>渲染器（WebGLRender）</h3><p>用 WebGL 的方式渲染相关。</p>
<p><strong>构造参数</strong></p>
<ul>
<li>antialias：是否抗锯齿，默认为否</li>
</ul>
<p><strong>方法</strong></p>
<ul>
<li>setPixelRatio( window.devicePixelRatio )：设置设备像素比，避免HiDPI设备上绘图模糊</li>
<li>setSize( window.innerWidth, window.innerHeight )：调整输出 canvas 的大小</li>
</ul>
<p><strong>属性</strong></p>
<ul>
<li>domElement：输出 canvas 节点</li>
</ul>
<h3 id="场景（Scene）"><a href="#场景（Scene）" class="headerlink" title="场景（Scene）"></a>场景（Scene）</h3><p>整个渲染的空间，可添加各种物体、灯光、摄像机的地方。</p>
<h3 id="透视摄像机（PerspectiveCamera）"><a href="#透视摄像机（PerspectiveCamera）" class="headerlink" title="透视摄像机（PerspectiveCamera）"></a>透视摄像机（PerspectiveCamera）</h3><p>有近大远小效果的摄像机，最为逼真。</p>
<p><code>const camera = new THREE.PerspectiveCamera( fov, aspect, near, far );</code></p>
<p><img src="https://blog-1251477229.cos.ap-chengdu.myqcloud.com/others/perspective_camera.png" alt="摄像机原理"></p>
<p><strong>视场角（FOV，the Field Of View）</strong></p>
<ul>
<li>在显示器上看到的范围，单位是角度（非弧度）</li>
<li>人类有接近180度的视野，有些鸟类有近360度，一般游戏为60-90，默认为 50</li>
<li>确定横向视场，配合 <code>aspect</code>属性确定纵向视场</li>
</ul>
<p><strong>长宽比（aspect）</strong></p>
<ul>
<li>宽除以高，一般为 <code>window.innerWidth / window.innerHeight</code></li>
</ul>
<p><strong>近截面（near）</strong> </p>
<ul>
<li>从距离摄像机多近开始渲染，默认为 0.1</li>
</ul>
<p> <strong>远截面（far）</strong></p>
<ul>
<li>摄像机最远能看到多远，默认为 1000</li>
<li>本质上就是获取相同宽高的图像需要的实际尺寸</li>
</ul>
<p><strong>属性</strong></p>
<ul>
<li>.positon.set( 0, 75, 160 )：设置机位</li>
</ul>
<h3 id="轨道控制器（OrbitControls）"><a href="#轨道控制器（OrbitControls）" class="headerlink" title="轨道控制器（OrbitControls）"></a>轨道控制器（OrbitControls）</h3><h3 id="纹理（Texture）"><a href="#纹理（Texture）" class="headerlink" title="纹理（Texture）"></a>纹理（Texture）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> texture = <span class="keyword">new</span> THREE.TextureLoader().load(<span class="string">&#x27;textures/water.jpg&#x27;</span>);</span><br><span class="line">texture.wrapS = THREE.RepeatWrapping;</span><br><span class="line">texture.wrapT = THREE.RepeatWrapping;</span><br><span class="line">texture.repeat.set(<span class="number">4</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<h3 id="倒影实现的原理"><a href="#倒影实现的原理" class="headerlink" title="倒影实现的原理"></a>倒影实现的原理</h3><p>构建一个虚拟的相机对需要倒影的物体进行渲染，然后将渲染的结果当作纹理映射到倒影平面上，这样就可以实现倒影的效果了</p>
<h3 id="精灵-sprite"><a href="#精灵-sprite" class="headerlink" title="精灵 sprite"></a>精灵 sprite</h3><p><code>THREE.Points</code> 创建小的物体来模拟雨雪烟等效果。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://shenyizhou.github.io/2021/02/24/2021-02-24-threejs/" data-id="cltehmzg4007srbab0idn6qk5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/threejs/" rel="tag">threejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8A%A8%E7%94%BB/" rel="tag">动画</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2021-02-09-今生必读的武侠小说列表" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/02/09/2021-02-09-%E4%BB%8A%E7%94%9F%E5%BF%85%E8%AF%BB%E7%9A%84%E6%AD%A6%E4%BE%A0%E5%B0%8F%E8%AF%B4%E5%88%97%E8%A1%A8/" class="article-date">
  <time datetime="2021-02-08T16:17:10.000Z" itemprop="datePublished">2021年02月09日</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B0%8F%E8%AF%B4/">小说</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/02/09/2021-02-09-%E4%BB%8A%E7%94%9F%E5%BF%85%E8%AF%BB%E7%9A%84%E6%AD%A6%E4%BE%A0%E5%B0%8F%E8%AF%B4%E5%88%97%E8%A1%A8/">今生必读的武侠小说列表</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>金庸全系列已读完，大爱。</p>
<p>恶补其他武侠小说经典 ing。</p>
<p><strong>古龙</strong></p>
<p>除了已读的《武林外史》</p>
<p>其余必读佳作</p>
<ol>
<li>古龙《欢乐英雄》欢乐武侠</li>
<li>古龙《多情剑客无情剑》小李飞刀李寻欢</li>
</ol>
<p>观望作品</p>
<ol>
<li>古龙《白玉老虎》唐门 莫去看《白玉雕龙》</li>
<li>古龙《萧十一郎》风四娘 沈璧君</li>
<li>古龙《楚留香传奇》铁血传奇 风流盗帅 一梦江湖 小李飞刀成绝响，人间不见楚留香 烂尾</li>
<li>古龙《陆小凤》系列 西门吹雪 叶孤城 烂尾</li>
<li>古龙《三少爷的剑》剑神谢三少 四大绝顶剑客 西门吹雪 叶孤城 燕南天</li>
<li>古龙《七种武器》</li>
</ol>
<p>预期阅读顺序（本着太好的不能上来就品尝的原则</p>
<ol start="0">
<li>先看《天涯明月刀》《离别钩》《大人物》的<strong>序</strong></li>
<li>一部 <strong>《离别钩》</strong></li>
<li>半部 <strong>《霸王枪》</strong></li>
<li><strong>《长生剑》</strong> 开头</li>
<li>楚留香 <strong>《大沙漠》</strong> 胡铁花</li>
<li>楚留香 <strong>《蝙蝠传奇》</strong></li>
<li>陆小凤 <strong>《金鹏王朝》</strong></li>
<li>陆小凤 <strong>《绣花大盗》</strong></li>
<li><strong>《欢乐英雄》</strong></li>
<li><strong>《多情剑客无情剑》</strong></li>
<li>如果还能继续的话，就《风云第一刀》即 <strong>《边城浪子》</strong> 叶开</li>
<li>了解游戏背景，<strong>《天涯明月刀》</strong></li>
</ol>
<p><strong>梁羽生</strong></p>
<p>必读三篇</p>
<ol>
<li>梁羽生《云海玉弓缘》金世遗 厉胜男 谷之华</li>
<li>梁羽生《萍踪侠影录》张丹峰 云蕾</li>
<li>梁羽生《女帝奇英传》武则天</li>
</ol>
<p>观望两篇</p>
<ol>
<li>梁羽生《白发魔女传》练霓裳</li>
<li>梁羽生《大唐游侠传》</li>
</ol>
<p>预期阅读顺序（从短篇入手</p>
<ol>
<li><strong>《飞凤潜龙》</strong> 颇短</li>
<li><strong>《冰魄寒光剑》</strong> 短 -&gt; 6.<strong>《云海玉弓缘》</strong></li>
<li><strong>《还剑奇情录》</strong> 短 -&gt; 7.<strong>《萍踪侠影录》</strong></li>
<li><strong>《塞外奇侠传》</strong> 短</li>
<li><strong>《女帝奇英传》</strong></li>
</ol>
<p><strong>温瑞安</strong></p>
<p>观望作品</p>
<ol>
<li>温瑞安《说英雄 谁是英雄》温柔一刀 雷家 金风细雨楼系列</li>
</ol>
<p>阅读顺序</p>
<ol>
<li><strong>《傲慢与偏剑》</strong> 短</li>
<li><strong>《空手道》</strong> 短</li>
<li><strong>《说英雄谁是英雄》1</strong> 温柔一刀</li>
<li><strong>《说英雄谁是英雄》2</strong> 可看情况跳过</li>
<li>了解游戏背景，<strong>《逆水寒》</strong>，越后面越好看</li>
</ol>
<p><strong>黄易</strong></p>
<p>不太感冒，罢辽</p>
<p><strong>其他</strong></p>
<p>必读名单（排名不分先后，只是个人感兴趣的程度）：</p>
<ol>
<li>孙晓《英雄志》四大主角 金庸封笔古龙逝，江湖唯有英雄志</li>
<li>管平潮《仙剑问情》仙路烟尘</li>
</ol>
<p>观望作品：</p>
<ol>
<li>凤歌《昆仑》模仿金庸</li>
<li>小椴《杯雪》诗词</li>
<li>马舸《以待天倾》白话文</li>
<li>沧月《鼎剑阁》七夜雪</li>
<li>树下野狐《搜神记》史诗 网络四大名著之一《英雄志》《昆仑》《诛仙》</li>
<li>九把刀《猎命师》欢乐武侠</li>
<li>司马翎《剑海鹰扬》《武林强人》</li>
</ol>
<p>阅读顺序，准备并行吧：</p>
<ol>
<li><strong>《英雄志》</strong></li>
<li><strong>《仙剑问情》</strong></li>
<li><strong>《昆仑》</strong></li>
<li><strong>《香初上舞》</strong></li>
<li><strong>《有匪》</strong></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://shenyizhou.github.io/2021/02/09/2021-02-09-%E4%BB%8A%E7%94%9F%E5%BF%85%E8%AF%BB%E7%9A%84%E6%AD%A6%E4%BE%A0%E5%B0%8F%E8%AF%B4%E5%88%97%E8%A1%A8/" data-id="cltehmzg3007prbab3z06a1ax" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%AD%A6%E4%BE%A0/" rel="tag">武侠</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/2/">下一页 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C#</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/">IDE</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ionic/">Ionic</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Lua/">Lua</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node/">Node</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Project/">Project</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/VPN/">VPN</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/">Vue</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Webpack/">Webpack</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E7%BB%BC%E5%90%88/">前端综合</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B0%8F%E8%AF%B4/">小说</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%AF%94%E8%BE%83/">技术比较</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E7%BB%BC%E5%90%88/">技术综合</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B1%87%E7%BC%96/">汇编</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%B8%E6%88%8F/">游戏</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/">生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%9F%A5%E8%AF%86/">知识</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%BB%E4%B9%A6/">读书</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Atom/" rel="tag">Atom</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/" rel="tag">Database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ElementUI/" rel="tag">ElementUI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Grunt/" rel="tag">Grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDE/" rel="tag">IDE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ionic/" rel="tag">Ionic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lua/" rel="tag">Lua</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LuaSocket/" rel="tag">LuaSocket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyEclipse/" rel="tag">MyEclipse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NPM/" rel="tag">NPM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/" rel="tag">Nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node/" rel="tag">Node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/" rel="tag">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Power-Designer/" rel="tag">Power Designer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/" rel="tag">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scala/" rel="tag">Scala</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UI/" rel="tag">UI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VPN/" rel="tag">VPN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VPS/" rel="tag">VPS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WPF/" rel="tag">WPF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebStorm/" rel="tag">WebStorm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/" rel="tag">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mock/" rel="tag">mock</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/package-json/" rel="tag">package.json</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/threejs/" rel="tag">threejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A8%E7%94%BB/" rel="tag">动画</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E8%A1%A8/" rel="tag">图表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%9F%E5%90%8D%E5%8A%AB%E6%8C%81/" rel="tag">域名劫持</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%97%E4%BD%93/" rel="tag">字体</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" rel="tag">字符串</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%BC%E5%85%A5/" rel="tag">导入</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E6%9C%BA%E5%8E%9F%E7%90%86/" rel="tag">微机原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF%E5%90%8D%E8%AF%8D/" rel="tag">技术名词</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF%E7%BB%BC%E5%90%88/" rel="tag">技术综合</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF%E9%99%B7%E9%98%B1/" rel="tag">技术陷阱</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" rel="tag">数据类型</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E6%A1%A3/" rel="tag">文档</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%B6%E9%97%B4/" rel="tag">时间</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A6%E4%BE%A0/" rel="tag">武侠</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B1%87%E7%BC%96/" rel="tag">汇编</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B3%A8%E9%87%8A/" rel="tag">注释</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3C/" rel="tag">深入理解C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8A%B6%E6%80%81%E7%A0%81/" rel="tag">状态码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%8B%E8%80%85%E8%8D%A3%E8%80%80/" rel="tag">王者荣耀</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%95%A5/" rel="tag">略</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/" rel="tag">知识体系</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%93%E5%AD%98/" rel="tag">缓存</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%A5%E9%9B%B6/" rel="tag">补零</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%B7%E6%B1%82/" rel="tag">请求</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6/" rel="tag">读书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B7%A8%E5%9F%9F/" rel="tag">跨域</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 12.86px;">Android</a> <a href="/tags/Atom/" style="font-size: 10px;">Atom</a> <a href="/tags/C/" style="font-size: 20px;">C#</a> <a href="/tags/CSS/" style="font-size: 15.71px;">CSS</a> <a href="/tags/Chrome/" style="font-size: 10px;">Chrome</a> <a href="/tags/Database/" style="font-size: 10px;">Database</a> <a href="/tags/ElementUI/" style="font-size: 11.43px;">ElementUI</a> <a href="/tags/Git/" style="font-size: 17.14px;">Git</a> <a href="/tags/GitHub/" style="font-size: 10px;">GitHub</a> <a href="/tags/Grunt/" style="font-size: 11.43px;">Grunt</a> <a href="/tags/HTML/" style="font-size: 11.43px;">HTML</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/IDE/" style="font-size: 12.86px;">IDE</a> <a href="/tags/Ionic/" style="font-size: 10px;">Ionic</a> <a href="/tags/Java/" style="font-size: 11.43px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 18.57px;">JavaScript</a> <a href="/tags/Lua/" style="font-size: 11.43px;">Lua</a> <a href="/tags/LuaSocket/" style="font-size: 10px;">LuaSocket</a> <a href="/tags/MyEclipse/" style="font-size: 10px;">MyEclipse</a> <a href="/tags/NPM/" style="font-size: 10px;">NPM</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/Node/" style="font-size: 10px;">Node</a> <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/Power-Designer/" style="font-size: 11.43px;">Power Designer</a> <a href="/tags/SEO/" style="font-size: 10px;">SEO</a> <a href="/tags/Scala/" style="font-size: 10px;">Scala</a> <a href="/tags/UI/" style="font-size: 10px;">UI</a> <a href="/tags/VPN/" style="font-size: 10px;">VPN</a> <a href="/tags/VPS/" style="font-size: 10px;">VPS</a> <a href="/tags/Vue/" style="font-size: 17.14px;">Vue</a> <a href="/tags/WPF/" style="font-size: 10px;">WPF</a> <a href="/tags/WebStorm/" style="font-size: 10px;">WebStorm</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/mock/" style="font-size: 10px;">mock</a> <a href="/tags/package-json/" style="font-size: 10px;">package.json</a> <a href="/tags/threejs/" style="font-size: 10px;">threejs</a> <a href="/tags/%E5%8A%A8%E7%94%BB/" style="font-size: 10px;">动画</a> <a href="/tags/%E5%9B%BE%E8%A1%A8/" style="font-size: 10px;">图表</a> <a href="/tags/%E5%9F%9F%E5%90%8D%E5%8A%AB%E6%8C%81/" style="font-size: 10px;">域名劫持</a> <a href="/tags/%E5%AD%97%E4%BD%93/" style="font-size: 10px;">字体</a> <a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" style="font-size: 10px;">字符串</a> <a href="/tags/%E5%AF%BC%E5%85%A5/" style="font-size: 10px;">导入</a> <a href="/tags/%E5%BE%AE%E6%9C%BA%E5%8E%9F%E7%90%86/" style="font-size: 11.43px;">微机原理</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E5%90%8D%E8%AF%8D/" style="font-size: 11.43px;">技术名词</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E7%BB%BC%E5%90%88/" style="font-size: 10px;">技术综合</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E9%99%B7%E9%98%B1/" style="font-size: 10px;">技术陷阱</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size: 10px;">数据类型</a> <a href="/tags/%E6%96%87%E6%A1%A3/" style="font-size: 10px;">文档</a> <a href="/tags/%E6%97%B6%E9%97%B4/" style="font-size: 10px;">时间</a> <a href="/tags/%E6%AD%A6%E4%BE%A0/" style="font-size: 10px;">武侠</a> <a href="/tags/%E6%B1%87%E7%BC%96/" style="font-size: 11.43px;">汇编</a> <a href="/tags/%E6%B3%A8%E9%87%8A/" style="font-size: 10px;">注释</a> <a href="/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3C/" style="font-size: 14.29px;">深入理解C#</a> <a href="/tags/%E7%8A%B6%E6%80%81%E7%A0%81/" style="font-size: 10px;">状态码</a> <a href="/tags/%E7%8E%8B%E8%80%85%E8%8D%A3%E8%80%80/" style="font-size: 10px;">王者荣耀</a> <a href="/tags/%E7%95%A5/" style="font-size: 10px;">略</a> <a href="/tags/%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/" style="font-size: 10px;">知识体系</a> <a href="/tags/%E7%BC%93%E5%AD%98/" style="font-size: 11.43px;">缓存</a> <a href="/tags/%E8%A1%A5%E9%9B%B6/" style="font-size: 10px;">补零</a> <a href="/tags/%E8%AF%B7%E6%B1%82/" style="font-size: 15.71px;">请求</a> <a href="/tags/%E8%AF%BB%E4%B9%A6/" style="font-size: 10px;">读书</a> <a href="/tags/%E8%B7%A8%E5%9F%9F/" style="font-size: 11.43px;">跨域</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">一月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/01/02/2023-01-02-%E5%89%8D%E7%AB%AF%E9%80%9A%E7%94%A8%E4%BE%9D%E8%B5%96%E5%BA%93%E7%BC%93%E5%AD%98%E6%96%B9%E6%A1%88/">前端通用依赖库缓存方案</a>
          </li>
        
          <li>
            <a href="/2022/12/19/2022-12-19-Antd%20Charts%20%E7%AD%89%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF/">Antd Charts 等数据可视化相关技术</a>
          </li>
        
          <li>
            <a href="/2022/04/17/2022-04-17-%E8%87%AA%E5%8A%A8%E6%89%B9%E9%87%8F%E8%AF%B7%E6%B1%82%EF%BC%885%EF%BC%89%E2%80%94%E2%80%94%20useRequest%20%E7%9A%84%E5%AE%9E%E7%8E%B0/">自动批量请求（5）—— useRequest 的实现</a>
          </li>
        
          <li>
            <a href="/2022/04/15/2022-04-15-%E8%87%AA%E5%8A%A8%E6%89%B9%E9%87%8F%E8%AF%B7%E6%B1%82%EF%BC%884%EF%BC%89%E2%80%94%E2%80%94%20%E5%88%A0%E5%87%8F%E9%87%8D%E5%A4%8D%E7%9A%84%E8%AF%B7%E6%B1%82/">自动批量请求（4）—— 删减重复的请求</a>
          </li>
        
          <li>
            <a href="/2021/07/18/2021-07-18-%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/">如何构建自己的知识体系</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2024 Yizhou Shen<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>